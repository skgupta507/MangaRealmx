---
import MainLayout from '../layouts/main.astro';
import { getMangas } from '../services/Manganato/manganato';

const genre = Astro.url.searchParams.get('genres') || "all";
const type = Astro.url.searchParams.get('type');
let status = Astro.url.searchParams.get('status');
status = !status ? "" : `&status=${status}`
const _type = !type ? "" : `&_type=${type}`
const query = `?genre=genre-${genre}${status}${_type}`
const mangas = await getMangas("/filter" + query)

---
<MainLayout title="Filter">	
	{mangas.map(({ image_url, title}) => {
		return <img src={image_url} alt={title} />
	})}
</MainLayout>