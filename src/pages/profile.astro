---
import MainLayout from '../layouts/main.astro';
import { getMangas } from '../services/Manganato/manganato';
import { ProfileDetails } from '../components/Widgets/ProfileDetails/ProfileDetails'
import { UserListCon } from '../components/Widgets/UserListCon/UserListCon'

const cookies = Astro.cookies
const authToken = cookies.get("auth_token")?.value
const urlPath = Astro.url.toString()

// if (!authToken) {
// 	return Astro.redirect("/")
// }

const options = {
	weekday: "long", 
  	day: "numeric",
  	month: "long", 
  	year: "numeric"
}
const user = {
	email: "testUser@gmail.com",
	username: "testUser",
	// @ts-ignore
	createdAt: new Date().toLocaleDateString("en-US", options),
	profile_image_url:  null,
}
const listMangas = await getMangas("/complete")
---

<MainLayout title="Profile">
	<ProfileDetails client:load user={user} />	
	<UserListCon client:load listMangas={listMangas} urlPath={urlPath} >	
</MainLayout>
