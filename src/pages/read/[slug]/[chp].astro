---
import MainLayout from '../../../layouts/main.astro';
import { getMangaChapter, getCachedManga } from '../../../services/Manganato/manganato';
import { Panels } from '../../../components/Widgets/Panels/Panels'
import Comments  from '../../../components/Widgets/Comments/Comments.astro'


const { slug, chp } = Astro.params;
const pageID = `${slug}/${chp}`
const url = Astro.url

if (!slug || !chp) {
	return Astro.redirect("/not_found")
}

const { panels } = await getMangaChapter(slug, chp)
const manga = await getCachedManga(slug)
---

<MainLayout title="chapter" >
	<Panels panels={panels} />
	<Comments PAGE_URL={url} PAGE_IDENTIFIER={pageID}/>
</MainLayout>
