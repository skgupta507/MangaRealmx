---
import MainLayout from '../../../layouts/main.astro';
import { getMangaChapter } from '../../../services/Manganato/manganato';
// import type { MangaRead, genre } from '../../services/Manganato/manganatoTypes';
import { Panels } from '../../../components/Widgets/Panels/Panels'
import Comments  from '../../../components/Widgets/Comments/Comments.astro'
// import { MangaDetails } from '../../components/Widgets/MangaDetails/MangaDetails'
// import { Cache } from '../../database/Cache/cache'


let { slug, chp } = Astro.params;
let pageID = `${slug}/${chp}`
const url = Astro.url

if (!slug || !chp) {
	chp = ""
	slug = ""
	pageID = "home"
}

// async function getData(): Promise<chapter | null> {
// }

// const manga = await getData()

const { panels } = await getMangaChapter(slug, chp)
---

<MainLayout title="chapter" >
	<Panels panels={panels} />
	{
		panels && <Comments PAGE_URL={url} PAGE_IDENTIFIER={pageID}/>
	}
</MainLayout>
